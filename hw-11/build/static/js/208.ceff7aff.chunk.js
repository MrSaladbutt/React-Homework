"use strict";(self.webpackChunkhw_2=self.webpackChunkhw_2||[]).push([[208],{208:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});const n="toDoList_container__USb59",o="toDoList_btn__tBMPA",a="toDoList_notasks__BERrb",r="toDoList_ul__luAQ4";var i=s(917);const c="deleteButton_btn__dmIn1";var l=s(579);const d=e=>{let{onClick:t,isPostLoading:s}=e;return(0,l.jsx)("button",{onClick:t,className:c,children:s?(0,l.jsx)(i.A,{width:10,color:"#ffff"}):"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})},u="toDoListItem_items__0EFlt",h="toDoListItem_check__1apUD",p="toDoListItem_uncheck__bdEnS",f="toDoListItem_btn__qmlr2";var g=s(907),m=s(698);const x=()=>{const e=(0,g.useQueryClient)();return(0,g.useMutation)((e=>(0,m.al)(e)),{onSuccess:(t,s)=>{e.setQueryData("todos",(e=>e.filter((e=>e.id!==s))))}})};var j=s(43),y=s(475);const _=e=>{let{task:t,refetch:s,isPostLoading:n,setIsPostLoading:o}=e;const{id:a,title:r,description:c,checked:g,creationDate:m}=t,_=x(),[b,v]=(0,j.useState)(null);return(0,l.jsxs)("li",{className:u,children:[(0,l.jsxs)("details",{children:[(0,l.jsxs)("summary",{children:[(0,l.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430: "}),r]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{children:"\u041e\u043f\u0438\u0441: "}),c]}),(0,l.jsx)("p",{className:g?h:p,children:g?"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u0430":"\u041d\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0430"}),(0,l.jsxs)("p",{children:[(0,l.jsx)("span",{children:"\u0414\u0430\u0442\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f: "}),m]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(y.N_,{to:"/todo-list/".concat(a),className:f,children:n?(0,l.jsx)(i.A,{width:10,color:"#ffff"}):"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),b&&(0,l.jsx)("p",{style:{color:"red"},children:b}),(0,l.jsx)(d,{isPostLoading:n,onClick:()=>(async e=>{try{o(!0),await _.mutateAsync(e),await s(),o(!1)}catch(t){o(!1),v("Error: ".concat(t.message))}})(a)})]})]},a)};var b=s(263);const v=(e=>{const t=e.length;return s=>{let n="";for(let o=0;o<s;o++){const s=Math.floor(Math.random()*t);n+=e[s]}return n}})("abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ-"),k=new Date,L=String(k.getDate()).padStart(2,"0")+"."+String(k.getMonth()+1).padStart(2,"0")+"."+k.getFullYear(),P="addToDoInfo_mainInput__ihoqX",D="addToDoInfo_inputs__ZtNuS",w="addToDoInfo_check__fn59q",I="addButton_btn__QWAQl",S=e=>{let{isPostLoading:t,addToDo:s}=e;return(0,l.jsx)("button",{disabled:t,onClick:s,className:I,children:t?(0,l.jsx)(i.A,{width:10,color:"#ffff"}):"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})},N=e=>{const[t,s]=(0,j.useState)(""),[n,o]=(0,j.useState)(""),[a,r]=(0,j.useState)(!1),i={id:v(10),title:t,description:n,checked:a,creationDate:L},{mutateAsync:c}=(0,g.useMutation)({mutationFn:e=>(0,m.u$)(e)}),[d,u]=(0,j.useState)(null),h=(0,j.useRef)(null),p=async()=>{try{e.setIsPostLoading(!0),await c(i),s(""),o(""),await e.refetch(),e.setIsPostLoading(!1)}catch(t){e.setIsPostLoading(!1),u("Error: ".concat(t.message))}},f=e=>{"Enter"===e.key&&p()};return(0,l.jsxs)("div",{className:D,children:[(0,l.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:P,onKeyPress:f}),(0,l.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),className:P,onKeyPress:f}),(0,l.jsxs)("div",{className:w,children:[(0,l.jsx)("p",{children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e: "}),(0,l.jsx)("input",{type:"checkbox",ref:h,name:"checkbox",id:"checkbox",checked:a,onChange:e=>{r(e.target.checked)}})]}),d&&(0,l.jsx)("p",{style:{color:"red"},children:d}),(0,l.jsx)(S,{isPostLoading:e.isPostLoading,addToDo:p})]})};var O=s(216);const E=()=>{const{data:e,isFetching:t,error:s,refetch:i}=(0,g.useQuery)({queryKey:["todos"],queryFn:m.rk}),[c,d]=(0,j.useState)(!1),[u,h]=(0,j.useState)(!1),p=(0,O.Zp)();(0,j.useEffect)((()=>{!t&&e&&0===e.length&&h(!1)}),[t,e]);return s&&p("/error-page",{replace:!0}),(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)("h1",{className:"main-header",children:"ToDo List"}),e&&e.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N,{refetch:i,isPostLoading:c,setIsPostLoading:d,error:s}),(0,l.jsx)("ul",{className:r,children:t?(0,l.jsx)(b.A,{color:"#DEB887",loading:t}):e.map(((e,t)=>(0,l.jsx)(_,{task:e,error:s,refetch:i,isPostLoading:c,setIsPostLoading:d},t)))})]}):u?(0,l.jsx)(N,{refetch:i,isPostLoading:c,setIsPostLoading:d,error:s}):(0,l.jsxs)("div",{className:a,children:[(0,l.jsx)("p",{children:"\u041d\u0430\u0440\u0430\u0437\u0456 \u0443 \u0432\u0430\u0441 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430\u0432\u0434\u0430\u043d\u044c"}),(0,l.jsx)("button",{onClick:()=>{h(!0)},className:o,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]})]})}},917:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(43),o=s(524),a=s(628),r=function(){return r=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},i=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]])}return s},c=(0,a.J)("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");const l=function(e){var t=e.loading,s=void 0===t||t,a=e.color,l=void 0===a?"#000000":a,d=e.speedMultiplier,u=void 0===d?1:d,h=e.cssOverride,p=void 0===h?{}:h,f=e.size,g=void 0===f?15:f,m=e.margin,x=void 0===m?2:m,j=i(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),y=r({display:"inherit"},p),_=function(e){return{display:"inline-block",backgroundColor:l,width:(0,o.p)(g),height:(0,o.p)(g),margin:(0,o.p)(x),borderRadius:"100%",animation:"".concat(c," ").concat(.7/u,"s ").concat(e%2?"0s":"".concat(.35/u,"s")," infinite linear"),animationFillMode:"both"}};return s?n.createElement("span",r({style:y},j),n.createElement("span",{style:_(1)}),n.createElement("span",{style:_(2)}),n.createElement("span",{style:_(3)})):null}}}]);
//# sourceMappingURL=208.ceff7aff.chunk.js.map