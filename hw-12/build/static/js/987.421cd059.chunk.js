"use strict";(self.webpackChunkhw_2=self.webpackChunkhw_2||[]).push([[987],{987:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});const n="toDoList_container__OsMOz",o="toDoList_btn__xqtfx",a="toDoList_notasks__AfKrL",c="toDoList_ul__hdv76";var r=s(917);const i="deleteButton_btn__Dy1HJ";var l=s(43),d=s(45),u=s(579);const h=e=>{let{onClick:t}=e;const{isPostLoading:s}=(0,l.useContext)(d.c);return(0,u.jsx)("button",{onClick:t,className:i,children:s?(0,u.jsx)(r.A,{width:10,color:"#ffff"}):"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})},p="toDoListItem_items__Aw3-H",x="toDoListItem_check__cpdss",f="toDoListItem_uncheck__zLkZv",m="toDoListItem_btn__xqGnl";var j=s(907),y=s(698);const _=()=>{const e=(0,j.useQueryClient)();return(0,j.useMutation)((e=>(0,y.al)(e)),{onSuccess:(t,s)=>{e.setQueryData("todos",(e=>e.filter((e=>e.id!==s))))}})};var v=s(475),g=s(719);const b=e=>{let{task:t}=e;const{id:s,title:n,description:o,checked:a,creationDate:c}=t,i=_(),[j,y]=(0,l.useState)(null),{refetch:b}=(0,l.useContext)(d.c),{isPostLoading:k,setIsPostLoading:D}=(0,l.useContext)(g.Q);return(0,u.jsxs)("li",{className:p,children:[(0,u.jsxs)("details",{children:[(0,u.jsxs)("summary",{children:[(0,u.jsx)("span",{children:"\u041d\u0430\u0437\u0432\u0430: "}),n]}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{children:"\u041e\u043f\u0438\u0441: "}),o]}),(0,u.jsx)("p",{className:a?x:f,children:a?"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u0430":"\u041d\u0435 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u0430"}),(0,u.jsxs)("p",{children:[(0,u.jsx)("span",{children:"\u0414\u0430\u0442\u0430 \u0441\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f: "}),c]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(v.N_,{to:"/todo-list/".concat(s),className:m,children:k?(0,u.jsx)(r.A,{width:10,color:"#ffff"}):"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"}),j&&(0,u.jsx)("p",{style:{color:"red"},children:j}),(0,u.jsx)(h,{onClick:()=>(async e=>{try{D(!0),await i.mutateAsync(e),await b(),D(!1)}catch(t){D(!1),y("Error: ".concat(t.message))}})(s)})]})]},s)};var k=s(263),D=s(829);const C="addToDoInfo_mainInput__z-4b6",w="addToDoInfo_inputs__WJH+f",L="addToDoInfo_check__yqIoV",O="addButton_btn__pASj2",N=e=>{let{addToDo:t}=e;const{isPostLoading:s}=(0,l.useContext)(g.Q);return(0,u.jsx)("button",{disabled:s,onClick:t,className:O,children:s?(0,u.jsx)(r.A,{width:10,color:"#ffff"}):"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})},I=()=>{const[e,t]=(0,l.useState)(""),[s,n]=(0,l.useState)(""),[o,a]=(0,l.useState)(!1),c={id:(0,D.$)(10),title:e,description:s,checked:o,creationDate:D.U},{mutateAsync:r}=(0,j.useMutation)({mutationFn:e=>(0,y.u$)(e)}),[i,h]=(0,l.useState)(null),p=(0,l.useRef)(null),{setIsPostLoading:x}=(0,l.useContext)(g.Q),{refetch:f}=(0,l.useContext)(d.c),m=async()=>{try{x(!0),await r(c),t(""),n(""),await f(),x(!1)}catch(e){x(!1),h("Error: ".concat(e.message))}},_=e=>{"Enter"===e.key&&m()};return(0,u.jsxs)("div",{className:w,children:[(0,u.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:C,onKeyPress:_}),(0,u.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),className:C,onKeyPress:_}),(0,u.jsxs)("div",{className:L,children:[(0,u.jsx)("p",{children:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u043e: "}),(0,u.jsx)("input",{type:"checkbox",ref:p,name:"checkbox",id:"checkbox",checked:o,onChange:e=>{a(e.target.checked)}})]}),i&&(0,u.jsx)("p",{style:{color:"red"},children:i}),(0,u.jsx)(N,{addToDo:m})]})};var P=s(216);const A=()=>{const{data:e,isFetching:t,error:s}=(0,j.useQuery)({queryKey:["todos"],queryFn:y.rk}),[r,i]=(0,l.useState)(!1),d=(0,P.Zp)();(0,l.useEffect)((()=>{!t&&e&&0===e.length&&i(!1)}),[t,e]);return s&&d("/error-page",{replace:!0}),(0,u.jsxs)("div",{className:n,children:[(0,u.jsx)("h1",{className:"main-header",children:"ToDo List"}),e&&e.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(I,{}),(0,u.jsx)("ul",{className:c,children:t?(0,u.jsx)(k.A,{style:{position:"absolute",top:"50%",left:"50%"},color:"#DEB887",loading:t}):e.map(((e,t)=>(0,u.jsx)(b,{task:e},t)))})]}):r?(0,u.jsx)(I,{}):(0,u.jsxs)("div",{className:a,children:[(0,u.jsx)("p",{children:"\u041d\u0430\u0440\u0430\u0437\u0456 \u0443 \u0432\u0430\u0441 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454 \u0437\u0430\u0432\u0434\u0430\u043d\u044c"}),(0,u.jsx)("button",{onClick:()=>{i(!0)},className:o,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u0432\u0434\u0430\u043d\u043d\u044f"})]})]})}},917:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(43),o=s(524),a=s(628),c=function(){return c=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},r=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]])}return s},i=(0,a.J)("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");const l=function(e){var t=e.loading,s=void 0===t||t,a=e.color,l=void 0===a?"#000000":a,d=e.speedMultiplier,u=void 0===d?1:d,h=e.cssOverride,p=void 0===h?{}:h,x=e.size,f=void 0===x?15:x,m=e.margin,j=void 0===m?2:m,y=r(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),_=c({display:"inherit"},p),v=function(e){return{display:"inline-block",backgroundColor:l,width:(0,o.p)(f),height:(0,o.p)(f),margin:(0,o.p)(j),borderRadius:"100%",animation:"".concat(i," ").concat(.7/u,"s ").concat(e%2?"0s":"".concat(.35/u,"s")," infinite linear"),animationFillMode:"both"}};return s?n.createElement("span",c({style:_},y),n.createElement("span",{style:v(1)}),n.createElement("span",{style:v(2)}),n.createElement("span",{style:v(3)})):null}}}]);
//# sourceMappingURL=987.421cd059.chunk.js.map